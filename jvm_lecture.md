深入理解JVM
---
### 3_深入理解JVM课程大纲分析与工具使用
JVM监控工具：  
1. jconsole  
在控制台输入jconsole  
2. jvisualvm  
在控制台输入jvisualvm

### 4_类加载器深入解析与阶段分解
在Java代码中，类型（类）的加载、连接和初始化过程都是在程序运行期间完成的

1. 类型的加载  
查找并加载类的二进制数据，将已经存在的类的字节码文件加载到内存中  
2. 连接  
验证-确保被加载类的正确性  
准备-为类的静态变量分配内存，并将其初始化为默认值  
解析-把类中的符号引用转换为直接引用
3. 初始化  
为类的静态变量赋予正确的初始值  
4. 使用  
5. 卸载  

以下几种情况，Java虚拟机将结束生命周期  
1. 执行了System.exit()
2. 程序正常结束
3. 遇到了异常或错误而异常终止
4. 操作系统错误导致Java虚拟机进程终止  


### 5_类的加载连接与初始化过程详解
Java程序对类的使用分为
1. 主动使用
2. 被动使用  
所有Java虚拟机的实现必须在每个类或接口被Java程序**首次主动使用**时，才初始化他们  

主动使用  
1. 创建类的实例
2. 访问某个类或接口的静态变量(getstatic)，或者对该静态变量赋值(putstatic)
3. 调用类的静态方法(invokestatic)
4. 反射(Class.forName("com.test.Test"))
5. 初始化一个类的子类
6. Java虚拟机启动时，被标记为启动类的类
7. JDK1.7开始提供的动态语言支持：java.lang.invoke.MethodHandle实例的解析结果
REF_getStatic,REF_putStatic,REF_invokeStatic句柄对应的类没有被初始化，则初始化  

除了以上几种情况，其他被动使用都不会导致类的**初始化**（加载和连接不包括在内）  

类的加载是指将类的.class文件中的二进制数据读入到内存中，将其放在运行时的数据区的方法区内，
然后在内存中创建一个java.lang.Class对象（规范并未说明Class对象位于哪里，HotSpot虚拟机将其放在了方法区中）
用来封装类在方法区内的数据结构，也是反射的由来。这个类的所有对象都只对应这一个Class对象。  







